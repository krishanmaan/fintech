import 'package:flutter/material.dart';
import 'package:flutter_svg/flutter_svg.dart';
import '../../../utils/responsive.dart';

/// Bottom navigation bar component jo 4 tabs dikhata hai.
class BottomNavBar extends StatelessWidget {
  const BottomNavBar({
    super.key,
    required this.responsive,
    this.currentIndex = 0,
    this.onTap,
  });

  final Responsive responsive;
  final int currentIndex;
  final ValueChanged<int>? onTap;

  @override
  Widget build(BuildContext context) {
    return Container(
      height: responsive.height(80),
      decoration: BoxDecoration(
        color: Colors.white,
        boxShadow: [
          BoxShadow(
            color: const Color(0xFF000000).withValues(alpha: 0.05),
            blurRadius: 10,
            offset: const Offset(0, -2),
          ),
        ],
      ),
      child: SafeArea(
        top: false,
        child: Row(
          mainAxisAlignment: MainAxisAlignment.spaceAround,
          children: [
            _NavItem(
              responsive: responsive,
              svgString: _homeSvg,
              label: 'Home',
              isActive: currentIndex == 0,
              onTap: () => onTap?.call(0),
            ),
            _NavItem(
              responsive: responsive,
              svgString: _salarySvg,
              label: 'Salary',
              isActive: currentIndex == 1,
              onTap: () => onTap?.call(1),
            ),
            _NavItem(
              responsive: responsive,
              svgString: _cardsSvg,
              label: 'Explore cards',
              isActive: currentIndex == 2,
              onTap: () => onTap?.call(2),
            ),
            _NavItem(
              responsive: responsive,
              svgString: _profileSvg,
              label: 'Profile',
              isActive: currentIndex == 3,
              onTap: () => onTap?.call(3),
            ),
          ],
        ),
      ),
    );
  }
}

/// Individual navigation item in bottom bar.
class _NavItem extends StatelessWidget {
  const _NavItem({
    required this.responsive,
    required this.svgString,
    required this.label,
    required this.isActive,
    required this.onTap,
  });

  final Responsive responsive;
  final String svgString;
  final String label;
  final bool isActive;
  final VoidCallback onTap;

  @override
  Widget build(BuildContext context) {
    // SVG string ko modify karke color change karte hain
    String modifiedSvg = svgString;
    final activeColor = '#532C8C'; // Purple for active
    final inactiveColor = '#98A2B3'; // Grey for inactive
    final targetColor = isActive ? activeColor : inactiveColor;
    
    // SVG me fill colors ko replace karte hain
    modifiedSvg = modifiedSvg.replaceAll('fill="#482983"', 'fill="$targetColor"');
    modifiedSvg = modifiedSvg.replaceAll('fill="black"', 'fill="$targetColor"');
    modifiedSvg = modifiedSvg.replaceAll('fill="none"', 'fill="none"');
    
    return GestureDetector(
      onTap: onTap,
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          SvgPicture.string(
            modifiedSvg,
            width: responsive.width(20),
            height: responsive.width(20),
          ),
          SizedBox(height: responsive.height(4)),
          Text(
            label,
            style: TextStyle(
              fontSize: responsive.fontSize(12),
              fontWeight: isActive ? FontWeight.w600 : FontWeight.w400,
              color: isActive
                  ? const Color(0xFF532C8C)
                  : const Color(0xFF98A2B3),
            ),
          ),
        ],
      ),
    );
  }
}

// SVG icons for bottom navigation
const String _homeSvg = '''
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 0C5.37234 0 0 5.37234 0 12C0 18.6277 5.37234 24 12 24C18.6272 24 24 18.6277 24 12C24 5.37234 18.6277 0 12 0ZM18.0637 12.3647H17.5697V17.3958C17.5697 17.9264 17.1394 18.3572 16.6083 18.3572H13.8539V15.1078C13.8539 14.5959 13.6462 14.1323 13.3106 13.7967C12.9755 13.4616 12.5119 13.2539 12 13.2539C10.9762 13.2539 10.1461 14.0836 10.1461 15.1078V18.3572H7.39172C6.86063 18.3572 6.43031 17.9264 6.43031 17.3958V12.3647H5.93625C5.03438 12.3647 4.62469 11.2378 5.31609 10.6584L10.7648 6.09188C11.4797 5.49328 12.5203 5.49328 13.2352 6.09188L18.6839 10.6584C19.3753 11.2378 18.9656 12.3647 18.0637 12.3647Z" fill="#482983"/>
</svg>
''';

const String _salarySvg = '''
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<g opacity="0.5">
<path d="M22.2672 15.9408C21.7666 15.6984 21.2239 15.555 20.6688 15.5184C20.9109 14.9198 21.0427 14.2823 21.0576 13.6368C21.1704 10.2408 18.48 7.77598 17.3352 6.71998L17.2152 6.61198C17.0496 6.45838 16.8984 6.30718 16.7568 6.15598C16.903 6.03292 17.0204 5.87933 17.1009 5.70602C17.1813 5.5327 17.2228 5.34386 17.2224 5.15278V5.12878C17.2215 4.86495 17.1414 4.60746 16.9925 4.38966C16.8436 4.17186 16.6328 4.00378 16.3872 3.90718C16.6622 3.14025 16.8545 2.34615 16.9608 1.53838C16.9775 1.40061 16.955 1.26093 16.896 1.13533C16.837 1.00972 16.7438 0.90327 16.6271 0.828149C16.5104 0.753028 16.3749 0.712272 16.2362 0.710545C16.0974 0.708818 15.961 0.74619 15.8424 0.818384C15.4747 1.02202 15.0817 1.17616 14.6736 1.27678C14.2802 1.37914 13.8671 1.37914 13.4736 1.27678C13.0629 1.17614 12.6674 1.02118 12.2976 0.815984C12.1784 0.743968 12.0412 0.70711 11.902 0.709657C11.7627 0.712205 11.627 0.754055 11.5104 0.830384C11.3946 0.904248 11.3023 1.0097 11.2445 1.1343C11.1867 1.2589 11.1657 1.39745 11.184 1.53358C11.292 2.34441 11.485 3.14161 11.76 3.91198C11.5139 4.00792 11.3023 4.17577 11.1529 4.39366C11.0035 4.61156 10.9232 4.86939 10.9224 5.13358V5.15758C10.9224 5.37086 10.9744 5.58094 11.0739 5.76956C11.1735 5.95819 11.3175 6.11967 11.4936 6.23998C11.3856 6.35518 11.2536 6.47998 11.1144 6.61198L10.9992 6.71998C9.84004 7.77598 7.16404 10.2384 7.27444 13.6344C7.27444 13.812 7.29604 13.9824 7.31524 14.1528H5.44564V13.3824C5.44564 13.2551 5.39507 13.133 5.30505 13.043C5.21503 12.953 5.09294 12.9024 4.96564 12.9024H1.55764C1.43033 12.9024 1.30824 12.953 1.21823 13.043C1.12821 13.133 1.07764 13.2551 1.07764 13.3824V21.5664C1.07764 21.6937 1.12821 21.8158 1.21823 21.9058C1.30824 21.9958 1.43033 22.0464 1.55764 22.0464H4.96564C5.09294 22.0464 5.21503 21.9958 5.30505 21.9058C5.39507 21.8158 5.44564 21.6937 5.44564 21.5664V20.9424L10.6728 23.052C11.0767 23.2039 11.5038 23.2851 11.9352 23.292C12.8952 23.292 13.7352 22.8768 14.7168 22.3872L14.8272 22.332H14.8512L22.2912 18.0576C22.485 17.956 22.6466 17.8026 22.7581 17.6144C22.8696 17.4262 22.9265 17.2107 22.9224 16.992C22.9241 16.7727 22.8634 16.5574 22.7474 16.3713C22.6314 16.1852 22.4649 16.0359 22.2672 15.9408ZM12.3888 5.51998H12.24C12.1462 5.51999 12.0563 5.48289 11.9897 5.4168C11.9232 5.3507 11.8855 5.26097 11.8848 5.16718V5.14318C11.8839 5.09594 11.8924 5.04897 11.9098 5.00504C11.9272 4.96111 11.9532 4.9211 11.9863 4.88735C12.0194 4.8536 12.0589 4.82679 12.1024 4.80849C12.146 4.79019 12.1928 4.78077 12.24 4.78078H15.9096C16.0032 4.78078 16.0929 4.81795 16.1591 4.88412C16.2253 4.95028 16.2624 5.04002 16.2624 5.13358V5.15758C16.2637 5.20472 16.2555 5.25163 16.2384 5.29554C16.2212 5.33946 16.1954 5.3795 16.1626 5.41328C16.1297 5.44706 16.0903 5.47391 16.0469 5.49224C16.0035 5.51057 15.9568 5.52 15.9096 5.51998H12.3888ZM13.2192 2.21278C13.7775 2.36162 14.365 2.36162 14.9232 2.21278C15.273 2.12096 15.6149 2.00138 15.9456 1.85518C15.8192 2.52445 15.637 3.18194 15.4008 3.82078H12.7368C12.5024 3.18159 12.3209 2.52417 12.1944 1.85518C12.5262 2.00099 12.8688 2.12055 13.2192 2.21278ZM11.6472 7.43998L11.7648 7.33198C12.0553 7.06774 12.3264 6.78301 12.576 6.47998H15.756C16.0046 6.77868 16.2733 7.06013 16.56 7.32238L16.6824 7.43278C17.7312 8.39278 20.1912 10.6488 20.0928 13.6032C20.086 14.2981 19.9036 14.9801 19.5624 15.5856C19.1943 15.6629 18.8372 15.7854 18.4992 15.9504L15.912 17.196C15.8426 16.8187 15.6443 16.4772 15.351 16.2299C15.0577 15.9826 14.6876 15.8448 14.304 15.84H11.52C10.657 14.9513 9.52161 14.3769 8.29444 14.208C8.26186 14.0078 8.24182 13.8058 8.23444 13.6032C8.13844 10.6488 10.596 8.39998 11.6472 7.43998ZM2.04724 21.096V13.8624H4.49524V21.0864L2.04724 21.096ZM21.84 17.1912L14.4 21.468L14.304 21.516C12.9912 22.1712 12.1968 22.5672 11.028 22.1544L5.44564 19.92V15.12H7.51924C8.1654 15.1202 8.80419 15.2572 9.39363 15.5219C9.98307 15.7867 10.5098 16.1732 10.9392 16.656C10.9842 16.7064 11.0392 16.7469 11.1009 16.7746C11.1625 16.8023 11.2293 16.8167 11.2968 16.8168H14.304C14.4639 16.8192 14.6179 16.8777 14.7389 16.9821C14.86 17.0865 14.9406 17.2302 14.9664 17.388C14.9708 17.5207 14.9321 17.6512 14.856 17.76C14.856 17.76 14.856 17.76 14.8416 17.7792C14.7841 17.8519 14.7112 17.911 14.6283 17.9525C14.5454 17.994 14.4543 18.0167 14.3616 18.0192H8.99284C8.86553 18.0192 8.74344 18.0698 8.65342 18.1598C8.56341 18.2498 8.51284 18.3719 8.51284 18.4992C8.51284 18.6265 8.56341 18.7486 8.65342 18.8386C8.74344 18.9286 8.86553 18.9792 8.99284 18.9792H14.3568C14.5628 18.9799 14.7668 18.9397 14.9571 18.861C15.1475 18.7823 15.3203 18.6667 15.4656 18.5208C15.4968 18.4896 15.528 18.456 15.5568 18.4224L18.9168 16.8048C19.2188 16.6514 19.5426 16.5454 19.8768 16.4904C20.5475 16.3933 21.2318 16.5012 21.84 16.8C21.8741 16.8154 21.9029 16.8404 21.9229 16.872C21.943 16.9035 21.9534 16.9402 21.9528 16.9776C21.9562 17.0202 21.9474 17.0629 21.9274 17.1008C21.9075 17.1386 21.8771 17.1699 21.84 17.1912Z" fill="black"/>
<path d="M12.56 8.74H13.936C13.992 8.74 14.064 8.74267 14.152 8.748C14.2427 8.75067 14.3253 8.75867 14.4 8.772C14.7307 8.82267 15.004 8.93467 15.22 9.108C15.4387 9.27867 15.6 9.49333 15.704 9.752C15.8107 10.0107 15.864 10.2987 15.864 10.616C15.864 11.08 15.7533 11.4733 15.532 11.796C15.3133 12.116 14.9787 12.328 14.528 12.432C14.4187 12.456 14.3227 12.472 14.24 12.48C14.1573 12.4853 14.0547 12.488 13.932 12.488H12.56V11.588H13.896C13.952 11.588 14.012 11.5853 14.076 11.58C14.1427 11.5747 14.2053 11.564 14.264 11.548C14.4213 11.5053 14.5453 11.4347 14.636 11.336C14.7293 11.2347 14.7947 11.12 14.832 10.992C14.872 10.864 14.892 10.7387 14.892 10.616C14.892 10.4933 14.872 10.368 14.832 10.24C14.7947 10.1093 14.7293 9.99333 14.636 9.892C14.5453 9.79067 14.4213 9.72 14.264 9.68C14.2053 9.664 14.1427 9.65467 14.076 9.652C14.012 9.64667 13.952 9.644 13.896 9.644H12.56V8.74ZM12.56 12.488L13.608 12.248L16.144 14.5H14.8L12.56 12.488ZM12.588 10.98V10.252H16.544V10.98H12.588ZM13.816 9.468V8.74H16.52V9.468H13.816Z" fill="black"/>
</g>
</svg>
''';

const String _cardsSvg = '''
<svg width="24" height="18" viewBox="0 0 24 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M21.8906 2.5162H21.1875V2.10938C21.1875 0.946266 20.2412 0 19.0781 0H2.10938C0.946266 0 0 0.946266 0 2.10938V12.1105C0 13.2736 0.946266 14.2199 2.10938 14.2199H2.8125V14.923C2.8125 16.0861 3.75877 17.0324 4.92188 17.0324H21.8906C23.0537 17.0324 24 16.0861 24 14.923V4.62558C24 3.46247 23.0537 2.5162 21.8906 2.5162ZM1.40625 12.1105V2.10938C1.40625 1.72167 1.72167 1.40625 2.10938 1.40625H19.0781C19.4658 1.40625 19.7812 1.72167 19.7812 2.10938V12.1105C19.7812 12.4982 19.4658 12.8136 19.0781 12.8136H2.10938C1.72167 12.8137 1.40625 12.4982 1.40625 12.1105ZM22.5938 14.923C22.5938 15.3107 22.2783 15.6262 21.8906 15.6262H4.92188C4.53417 15.6262 4.21875 15.3107 4.21875 14.923V14.2199H19.0781C20.2412 14.2199 21.1875 13.2736 21.1875 12.1105V3.92245H21.8906C22.2783 3.92245 22.5938 4.23788 22.5938 4.62558V14.923Z" fill="black"/>
<path d="M2.8125 5.76227H7.70719V7.16852H2.8125V5.76227Z" fill="black"/>
<path d="M2.8125 2.94977H6.2408V4.35602H2.8125V2.94977Z" fill="black"/>
<path d="M16.9688 10.0011H18.375V11.4073H16.9688V10.0011Z" fill="black"/>
</svg>
''';

const String _profileSvg = '''
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<g opacity="0.5">
<path d="M12 12.75C8.83 12.75 6.25 10.17 6.25 7C6.25 3.83 8.83 1.25 12 1.25C15.17 1.25 17.75 3.83 17.75 7C17.75 10.17 15.17 12.75 12 12.75ZM12 2.75C9.66 2.75 7.75 4.66 7.75 7C7.75 9.34 9.66 11.25 12 11.25C14.34 11.25 16.25 9.34 16.25 7C16.25 4.66 14.34 2.75 12 2.75Z" fill="black"/>
<path d="M20.5901 22.75C20.1801 22.75 19.8401 22.41 19.8401 22C19.8401 18.55 16.3202 15.75 12.0002 15.75C7.68015 15.75 4.16016 18.55 4.16016 22C4.16016 22.41 3.82016 22.75 3.41016 22.75C3.00016 22.75 2.66016 22.41 2.66016 22C2.66016 17.73 6.85015 14.25 12.0002 14.25C17.1502 14.25 21.3401 17.73 21.3401 22C21.3401 22.41 21.0001 22.75 20.5901 22.75Z" fill="black"/>
</g>
</svg>
''';

